<!DOCTYPE html>
<html>
<head>
    <title>Test NIT localStorage</title>
</head>
<body>
    <h1>Test de Guardado de NIT</h1>
    <button onclick="testGuardar()">1. Guardar NIT</button>
    <button onclick="testCargar()">2. Cargar NIT</button>
    <button onclick="testVerLocalStorage()">3. Ver localStorage</button>
    <button onclick="testLimpiar()">4. Limpiar todo</button>
    <div id="resultado" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>

    <script>
        function testGuardar() {
            const testData = {
                company: {
                    name: 'Test Empresa',
                    slogan: 'Test Slogan',
                    nit: '123456789',
                    logo: ''
                }
            };
            
            localStorage.setItem('proformaAppData', JSON.stringify(testData));
            localStorage.setItem('companyNit', '123456789');
            
            document.getElementById('resultado').innerHTML = `
                <strong>Guardado exitoso:</strong><br>
                - proformaAppData: ${JSON.stringify(testData)}<br>
                - companyNit: 123456789
            `;
        }

        function testCargar() {
            const data = localStorage.getItem('proformaAppData');
            const nit = localStorage.getItem('companyNit');
            
            let resultado = '<strong>Cargando datos:</strong><br>';
            
            if (data) {
                const parsed = JSON.parse(data);
                resultado += `- proformaAppData: ${JSON.stringify(parsed)}<br>`;
                resultado += `- company.nit: ${parsed.company ? parsed.company.nit : 'NO EXISTE'}<br>`;
            } else {
                resultado += '- proformaAppData: NO EXISTE<br>';
            }
            
            resultado += `- companyNit separado: ${nit || 'NO EXISTE'}`;
            
            document.getElementById('resultado').innerHTML = resultado;
        }

        function testVerLocalStorage() {
            let resultado = '<strong>Todo el localStorage:</strong><br>';
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                resultado += `<br><strong>${key}:</strong> ${value.substring(0, 200)}${value.length > 200 ? '...' : ''}`;
            }
            document.getElementById('resultado').innerHTML = resultado;
        }

        function testLimpiar() {
            localStorage.clear();
            document.getElementById('resultado').innerHTML = '<strong>localStorage limpiado</strong>';
        }
    </script>
</body>
</html>
